/* frontend/src/components/Atelier.css */
/* Redesigned Atelier with cozy, handmade, 90s workshop feel */

.atelier-container {
  background-color: #4a3f35; /* Wood workbench color */
  border-radius: var(--border-radius-lg);
  padding: 25px;
  box-shadow: var(--shadow-medium), inset 0 0 80px rgba(0,0,0,0.3);
  position: relative;
  overflow: hidden;
  border: 3px solid #332a22; /* Darker wood frame */
  /* Wood grain texture */
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Cg fill='%235a4f45' fill-opacity='0.1'%3E%3Cpath fill-rule='evenodd' d='M0 0h40v40H0V0zm40 40h40v40H40V40zm0-40h2v40h-2V0zm40 2h-40v2h40V2zM0 40h40v2H0v-2zm40-40h40v2H40V0z'/%3E%3C/g%3E%3C/svg%3E"),
    linear-gradient(to bottom, #5a4f45, #4a3f35);
  color: var(--color-text-light);
}

/* Atelier Header */
.atelier-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 2px solid #332a22; /* Darker wood border */
  padding: 10px 15px;
  margin: -25px -25px 20px -25px; /* Extend to edges */
  background: linear-gradient(to bottom, #6d5f53, #5a4f45); /* Lighter wood top */
  box-shadow: 0 3px 6px rgba(0,0,0,0.4);
  position: relative;
  z-index: 1;
}

.atelier-header h2 {
  margin: 0;
  color: var(--color-text-heading);
  font-weight: normal;
  font-size: 26px;
  font-family: var(--font-primary);
  display: flex;
  align-items: center;
  gap: 12px;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

/* Tools icon */
.atelier-header h2::before {
  content: 'üõ†Ô∏è'; /* Tools emoji */
  font-size: 24px;
  color: var(--color-accent-secondary); /* Gold accent */
  filter: drop-shadow(0 1px 1px rgba(0,0,0,0.3));
}

.spec-badge {
  font-size: 14px;
  color: var(--color-accent-primary);
  font-family: var(--font-secondary);
  font-weight: 300;
  margin-left: 10px;
  border: 1px solid rgba(0,0,0,0.3);
  padding: 3px 8px;
  border-radius: 12px;
  background-color: rgba(0,0,0,0.2);
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.3);
}

.phase-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  background-color: rgba(0,0,0,0.2);
  padding: 6px 12px;
  border-radius: var(--border-radius-sm);
  border: 1px solid var(--color-bg-dark);
}

.phase-indicator span {
  font-size: 14px;
  color: var(--color-accent-primary);
  font-weight: bold;
  font-family: var(--font-primary);
}

/* Atelier Workspace Layout */
.atelier-workspace {
  display: grid;
  grid-template-columns: 2fr 3fr 2fr;
  gap: 20px;
  height: calc(100% - 70px); /* Adjust based on header */
}

/* Panel Styling */
.ingredients-panel, .crafting-area, .results-panel {
  background-color: rgba(62, 58, 82, 0.6); /* Purple tinted panel */
  border-radius: var(--border-radius-md);
  padding: 15px;
  box-shadow: var(--shadow-inset);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  border: 1px solid var(--color-border);
  backdrop-filter: blur(3px);
  /* Parchment texture */
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TtSIVBTuIOASpThZERcRJq1CkCqVWaNXB5NIvaNKQpLg4Cq4FBz8Wqw4uzro6uAqC4AeIm5uToouU+L+k0CLGg+N+vLv3uHsHCK0q08zQJKBplpFOJoRcflUIvMKPIAYREJGZZcxJUgq+4+seAb7exXhW/31/joFCwSxgQCSeYbphEW8QT29aDebE+0SR8qIoEJ8Ljht8IvFJ6qbHS74nFkscrHQr8SyxWCpxLXE1qRPJc5wWKo21ytU8O1+YVnO1qHQls4jpSFJclVKhspjlN1RlI1UnUyyleCp1juYs+QfHWZaizFOqMTcQxxKSUEGUjQ1UUEMDUTxaacdIOs3Dj/h45/ETciXAyFmAgRpVFPsBH3fD/N7Z276fAPxn4JKu+2NNMPpJerWrRY+A4W1g8VrX9HVgcAd4MuGKbspDUygWgPcz+qYcMHgLDKy52vd2rTOA+S3QM9mt6SIhNrD4+e6MniO3gaFNoLfO9rY9xvHAE/CorwsKboGBLWBm3dHbw93dgff395z194fZPHLClBQq+gAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+UEBwkPJYm73h4AAALwSURBVGhD7Zm9axRRFMXfjCERdSUJafInpLKxE7GxEJt0FoKkSCMWYmUh9nZ2NiIpBAsRIdWCYLpgpZ0StBM/wI/OZNfz5r6RCbvZDDN33mYHFn5v73n33HfuzDz2JY3aonq+JB3dNuXQiCv7eSHOGGFMxmKnXSm16kq7y+qVG+r2OjrHxsYi5mRO5rYbptLKSOf3tLfgyr5JjZgSu61YdBrlupLnO+hEpIwY2/ZYcJ7VXOO7umfWWBtjp12RzpY7jBj3vp1QqXYE9+x3FVzrvHPmETmTaXasWlUXU3bvTnK/q3vJWewRJ83ot/b6usvOWdsGXSuHrj0zZnL3pG0mwdhMJnhR0vbcB0SZVhV/EHFJLmNT6J4kXJuBfYbmcM1kjHV42QdEJMVfEmvFtvdIAQtQwF4YsFMFUOBTkIaG7JQx/JLYyADhW3yjG90xMDQnoLOYoP23YMzEmCkRmw8Ih9hoJojmqTELCRqbJxYHCP98rCE5wU7JDR3oDo2JSRMGCLm54gADdHdYxPH3QwPCfwb8Rze606AdIBMpw3/GIfR3yI0ZA2MzIz4g4hJI5gQx1zCInpADOWFAyM0Vh+YMkxtHBogJXDXmPyXHJL7zDXKjO2VIZoBUW657s+Z+7brpTH6OiUmTrAOkoNQfkOKePyDlD1OAkIvaXg2Q/5gzH2Z+nJ0txqc/nv6QXz5Vgm81nSt3/zzWZy+/6JPs0UqeDFx7/5N+fzumk73D5jLzYdDi8K/DjRmtFu9PNcrq86wYr5ZeDYpZA1uLp3X65w+tZ3qEA57vkQORj9tXtHr+uImAjvnOk33L/KqDaVu8v8c/d21/g0eJi3cvmH9Qlf5+N8kixZ3Yfft5Vt8+r+ncmUNpn3yL5TtXtbiwa3sDR0SQ4r43K1o7c1TTU0eG+5yTucX6bXMxc0TEfC++ajhiDo8d6H+WvjInc02+wfkjM9LunfyPbQsVe2z7ESj7ebH9A7nq/CfhkB07AAAAAElFTkSuQmCC');
  background-blend-mode: overlay;
  background-size: 100px;
  opacity: 0.6;
}

/* Panel Headers */
.ingredients-panel h3, .crafting-area h3, .results-panel h3 {
  margin: 0 0 10px 0;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--color-border);
  color: var(--color-text-heading);
  font-size: 18px;
  font-weight: 500;
  text-align: center;
  letter-spacing: 0.5px;
  font-family: var(--font-primary);
  text-shadow: 1px 1px 1px rgba(0,0,0,0.4);
}

/* Ingredients List */
.ingredient-list, .results-list {
  flex: 1;
  overflow-y: auto;
  padding: 10px 5px 5px 0; /* Adjust padding for scrollbar */
}

.ingredient-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(70px, 1fr)); /* Smaller items */
  gap: 10px;
}

/* Ingredient Item - 90s Icon Style */
.ingredient-item {
  background-color: var(--color-bg-light);
  border: 1px solid var(--color-bg-medium);
  border-bottom-color: var(--color-border);
  border-right-color: var(--color-border);
  border-radius: var(--border-radius-sm);
  padding: 8px;
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  transition: all 0.2s ease;
  aspect-ratio: 1 / 1.2;
  min-height: 80px;
  position: relative;
  box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}

.ingredient-item:hover {
  background-color: var(--color-border);
  transform: translateY(-2px);
  box-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}
.ingredient-item:hover .item-name { color: var(--color-bg-dark); }
.ingredient-item:hover .item-quantity { color: var(--color-bg-medium); }

.ingredient-item.selected-dim { opacity: 0.6; } /* Keep dimming */
.ingredient-item.disabled { opacity: 0.4; cursor: not-allowed; }
.ingredient-item.disabled:hover { transform: none; background-color: var(--color-bg-light); box-shadow: 1px 1px 2px rgba(0,0,0,0.2); }

.item-image {
  width: 40px;
  height: 40px;
  background-color: var(--color-bg-panel);
  border-radius: var(--border-radius-sm); /* Less round */
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 5px;
  overflow: hidden;
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-inset);
  image-rendering: pixelated; /* If using images */
}

.placeholder-image { font-size: 18px; color: var(--color-accent-primary); font-weight: bold; }
.item-name { font-size: 11px; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; color: var(--color-text-light); font-weight: 500; margin-bottom: 2px; }
.item-quantity { font-size: 10px; color: var(--color-text-dark); }

/* Selected Count Badge */
.selected-count-badge {
  position: absolute;
  top: 2px;
  right: 2px;
  background-color: var(--color-accent-secondary); /* Gold badge */
  color: var(--color-bg-dark);
  font-size: 10px;
  font-weight: bold;
  border-radius: 50%;
  min-width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 2px rgba(0,0,0,0.3);
  padding: 0 3px;
  line-height: 1; /* Ensure text centers vertically */
}

/* Crafting Area */
.crafting-area { align-items: center; justify-content: center; }

/* Crafting Bench - Wood texture */
.cauldron { /* Reusing class, but styling differently */
  width: 80%;
  max-width: 280px;
  aspect-ratio: 1.5 / 1; /* Wider bench */
  background-color: #6d5f53; /* Wood color */
  border-radius: var(--border-radius-sm);
  margin: 15px auto;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.4), var(--shadow-inset);
  border: 2px solid #4a3f35;
  border-bottom-color: #7d6f63;
  border-right-color: #7d6f63;
  /* Wood grain */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Cg fill='%234a3f35' fill-opacity='0.2'%3E%3Cpath fill-rule='evenodd' d='M0 0h40v40H0V0zm40 40h40v40H40V40zm0-40h2v40h-2V0zm40 2h-40v2h40V2zM0 40h40v2H0v-2zm40-40h40v2H40V0z'/%3E%3C/g%3E%3C/svg%3E");
}

.empty-cauldron { color: var(--color-text-light); font-style: italic; text-align: center; padding: 10px; z-index: 1; }

/* Selected Items on Bench */
.selected-ingredients {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 10px;
  width: 90%;
  max-height: 80%;
  overflow-y: auto;
  align-content: center;
  justify-content: center;
  z-index: 1;
}

.selected-item {
  background: linear-gradient(to bottom, var(--color-bg-light), var(--color-bg-medium));
  color: var(--color-text-light);
  border: 1px solid var(--color-bg-dark);
  border-radius: var(--border-radius-sm);
  padding: 5px 8px;
  font-size: 12px;
  display: flex;
  align-items: center;
  gap: 5px;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 1px 2px rgba(0,0,0,0.3), var(--shadow-inset);
}
.selected-item:hover { transform: translateY(-1px); background: linear-gradient(to bottom, #6a6582, #4e4a68); }
.remove-item { font-size: 14px; color: var(--color-danger); margin-left: 3px; font-weight: bold; }
.placeholder-slot { /* Style for empty visual slots */
    width: 60px; /* Example size */
    height: 28px;
    background: rgba(0,0,0,0.1);
    border: 1px dashed var(--color-border);
    box-shadow: none;
    cursor: default;
    border-radius: var(--border-radius-sm);
}

/* Clear Button */
.clear-button {
  margin-top: 10px;
  padding: 6px 12px;
  background: linear-gradient(to bottom, var(--color-bg-light), var(--color-bg-medium));
  color: var(--color-text-medium);
  border: 1px solid var(--color-bg-dark);
  border-radius: var(--border-radius-sm);
  font-size: 12px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.3);
  cursor: pointer;
  transition: all 0.2s ease;
}
.clear-button:hover { background: linear-gradient(to bottom, #6a6582, #4e4a68); color: var(--color-text-light); }

/* Tabs */
.tabs {
  display: flex;
  gap: 3px; /* Tight spacing */
  margin-bottom: 10px;
  background-color: rgba(0,0,0,0.1);
  padding: 3px;
  border-radius: var(--border-radius-sm);
  border: 1px solid var(--color-bg-dark);
}

.tabs button {
  flex: 1;
  background-color: var(--color-bg-light);
  border: 1px solid var(--color-bg-medium);
  border-bottom-color: var(--color-border);
  border-right-color: var(--color-border);
  border-radius: var(--border-radius-sm);
  padding: 6px 8px;
  color: var(--color-text-medium);
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: var(--font-primary);
  font-size: 13px;
  box-shadow: inset 0 1px 1px rgba(255,255,255,0.05);
}
.tabs button:hover { background-color: var(--color-border); color: var(--color-bg-dark); }
.tabs button.active {
  background-color: var(--color-accent-primary);
  color: var(--color-bg-dark);
  border-color: var(--color-border-light);
  box-shadow: var(--shadow-inset);
}

/* Result Items */
.result-item {
  background-color: var(--color-bg-light);
  border: 1px solid var(--color-bg-medium);
  border-radius: var(--border-radius-sm);
  padding: 10px;
  margin-bottom: 8px;
  display: flex;
  gap: 10px;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}
.result-item:hover { background-color: var(--color-border); transform: translateX(2px); }

.result-image {
  width: 45px;
  height: 45px;
  background-color: var(--color-bg-panel);
  border-radius: var(--border-radius-sm);
  display: flex; align-items: center; justify-content: center;
  overflow: hidden;
  border: 1px solid var(--color-border);
  flex-shrink: 0;
  image-rendering: pixelated;
}
.result-details { flex: 1; display: flex; flex-direction: column; gap: 2px; min-width: 0; }
.result-name { font-size: 14px; color: var(--color-text-light); font-weight: 500; font-family: var(--font-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.result-description { font-size: 11px; color: var(--color-text-medium); line-height: 1.3; height: 2.6em; overflow: hidden; }
.result-rarity { font-size: 11px; font-style: italic; margin-top: auto; text-align: right; text-transform: capitalize; font-family: var(--font-secondary); font-weight: bold; }
.level-req { font-size: 11px; text-align: right; color: var(--color-text-dark); margin-top: 2px; font-weight: bold;}

/* Rarity Colors */
.result-rarity.common { color: var(--color-text-dark); }
.result-rarity.uncommon { color: var(--color-success); }
.result-rarity.rare { color: var(--color-info); }
.result-rarity.legendary { color: var(--color-warning); }

.no-results { text-align: center; padding: 15px; color: var(--color-text-medium); font-style: italic; font-size: 13px; }

/* Crafting Animations (Placeholder - Add specific animations if needed) */
.crafting-active .cauldron {
  animation: workbench-shake 0.5s infinite alternate;
}

@keyframes workbench-shake {
  0% { transform: translateX(-1px); }
  100% { transform: translateX(1px); }
}

/* Responsive Adjustments */
@media (max-width: 1200px) {
  .atelier-workspace { grid-template-columns: 1fr 1fr; grid-template-rows: auto 1fr; }
  .ingredients-panel { grid-column: 1 / 2; grid-row: 1 / 3; }
  .crafting-area { grid-column: 2 / 3; grid-row: 1 / 2; }
  .results-panel { grid-column: 2 / 3; grid-row: 2 / 3; }
}

@media (max-width: 768px) {
  .atelier-workspace { grid-template-columns: 1fr; grid-template-rows: 300px auto 300px; }
  .ingredients-panel, .crafting-area, .results-panel { grid-column: 1 / 2; }
  .ingredients-panel { grid-row: 1 / 2; }
  .crafting-area { grid-row: 2 / 3; }
  .results-panel { grid-row: 3 / 4; }
  .atelier-header h2 { font-size: 22px; }
  .ingredient-list { grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 8px; }
  .item-image { width: 35px; height: 35px; }
}