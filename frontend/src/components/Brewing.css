/* frontend/src/components/Brewing.css */
/* Styles for the Witch's Cauldron brewing interface */

.brewing-container {
    display: flex;
    flex-direction: column;
    background-color: var(--color-bg-panel); /* Use panel background */
    color: var(--color-text-light);
    border-radius: var(--border-radius-lg); /* Use theme variable */
    padding: 25px; /* Increased padding */
    box-shadow: var(--shadow-inset), var(--shadow-soft); /* Combine shadows */
    height: 100%;
    overflow: hidden;
    border: 1px solid var(--color-border);
  }
  
  .brewing-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--color-border-light);
    padding-bottom: 15px;
    margin-bottom: 20px;
    flex-shrink: 0; /* Prevent header shrinking */
  }
  
  .brewing-header h2 {
    margin: 0;
    color: var(--color-text-heading);
    font-weight: 500; /* Slightly bolder */
    font-size: 26px; /* Adjusted size */
    letter-spacing: 1px;
    font-family: var(--font-primary);
  }
  
  .brewing-phase {
    display: flex;
    align-items: center;
    gap: 10px;
    background-color: var(--color-bg-medium);
    padding: 8px 15px; /* Adjusted padding */
    border-radius: 20px;
    border: 1px solid var(--color-border);
  }
  
  .phase-label {
    font-size: 13px; /* Smaller label */
    color: var(--color-text-medium);
    font-family: var(--font-secondary);
  }
  
  .phase-value {
    font-size: 14px;
    color: var(--color-accent-primary);
    font-weight: bold;
    font-family: var(--font-primary);
  }
  
  .brewing-content {
    display: grid;
    grid-template-columns: 1fr 1.3fr 1fr; /* Adjusted column proportions */
    gap: 25px; /* Increased gap */
    flex: 1; /* Allow content to fill space */
    overflow: hidden; /* Prevent content overflow */
  }
  
  /* Ingredients Panel */
  .ingredients-panel, .recipes-panel {
    background-color: var(--color-bg-medium);
    border-radius: var(--border-radius-md);
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Prevent inner overflow */
    border: 1px solid var(--color-border);
    padding: 15px; /* Add padding to panels */
  }
  
  .ingredients-header, .recipes-header {
    padding-bottom: 15px;
    border-bottom: 1px solid var(--color-border-light);
    flex-shrink: 0;
  }
  
  .ingredients-header h3, .recipes-header h3 {
    margin: 0 0 10px 0; /* Adjusted margin */
    color: var(--color-accent-primary);
    font-size: 18px;
    font-weight: 500;
    font-family: var(--font-primary);
  }
  
  .ingredients-filters {
    display: flex;
    gap: 10px;
  }
  
  .ingredients-filters select,
  .ingredients-filters input {
    flex: 1;
    background-color: var(--color-bg-panel);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-sm);
    padding: 8px 10px; /* Adjusted padding */
    color: var(--color-text-light);
    font-family: var(--font-secondary);
    font-size: 13px; /* Smaller font */
  }
  
  .ingredients-grid, .recipes-list {
    flex: 1; /* Allow list to fill space */
    overflow-y: auto; /* Enable scrolling */
    padding: 15px 5px 5px 5px; /* Add padding, reduce right for scrollbar */
    margin-right: -5px; /* Offset scrollbar space */
  }
  
  .ingredient-item, .recipe-item {
    background-color: var(--color-bg-light); /* Lighter background for items */
    border-radius: var(--border-radius-sm);
    padding: 10px; /* Adjust padding */
    cursor: pointer;
    transition: all var(--transition-speed) ease;
    position: relative;
    border: 1px solid var(--color-border);
  }
  .ingredient-item:hover, .recipe-item:hover {
    transform: translateY(-2px);
    border-color: var(--color-accent-primary);
    box-shadow: var(--shadow-soft);
    background-color: var(--color-border); /* Darker hover */
  }
  .ingredient-item.selected {
    background-color: var(--color-accent-primary);
    border-color: var(--color-text-light);
    color: var(--color-bg-dark);
  }
  .ingredient-item.selected .ingredient-name,
  .ingredient-item.selected .ingredient-quality,
  .ingredient-item.selected .ingredient-quantity,
  .ingredient-item.selected .ingredient-category-tag {
      color: var(--color-bg-dark); /* Dark text on selection */
  }
  .ingredient-item.selected .ingredient-category-tag {
      background-color: rgba(0,0,0,0.2);
  }
  
  
  .ingredient-item {
      display: flex;
      align-items: center;
      gap: 10px;
  }
  
  .ingredient-image {
    width: 45px; /* Consistent size */
    height: 45px;
    border-radius: 50%;
    background-color: var(--color-bg-panel);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    flex-shrink: 0; /* Prevent shrinking */
  }
  .ingredient-image img { width: 100%; height: 100%; object-fit: cover; }
  .placeholder-image { font-size: 20px; color: var(--color-accent-primary); font-weight: bold; }
  
  .ingredient-details { text-align: left; flex-grow: 1; }
  .ingredient-name { font-size: 14px; color: var(--color-text-light); margin-bottom: 3px; font-weight: 500; }
  .ingredient-quality, .ingredient-quantity { font-size: 12px; color: var(--color-text-medium); }
  
  .ingredient-category-tag {
    position: absolute;
    top: 5px;
    right: 5px;
    background-color: var(--color-bg-medium);
    color: var(--color-text-dark);
    font-size: 10px;
    padding: 2px 5px;
    border-radius: 8px; /* Pill shape */
    font-family: var(--font-secondary);
  }
  .no-ingredients, .no-recipes { text-align: center; padding: 30px; color: var(--color-text-medium); font-style: italic; }
  
  /* Brewing Workspace */
  .brewing-workspace { display: flex; flex-direction: column; gap: 15px; }
  
  .cauldron {
    flex-grow: 1; /* Take available space */
    min-height: 250px; /* Ensure min height */
    background-color: var(--color-bg-panel);
    border-radius: var(--border-radius-md);
    display: flex;
    flex-direction: column; /* Stack content vertically */
    align-items: center;
    justify-content: center; /* Center content vertically */
    padding: 20px;
    position: relative;
    overflow: hidden;
    border: 1px solid var(--color-border);
  }
  
  .cauldron-content {
    width: 180px; /* Smaller cauldron visual */
    height: 180px;
    background-color: var(--color-bg-dark);
    border-radius: 50%;
    border: 4px solid var(--color-border-light);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    margin-bottom: 15px; /* Space below cauldron */
    box-shadow: var(--shadow-inset);
  }
  .cauldron-content::before {
    content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 60%;
    background: linear-gradient(to bottom, rgba(93, 70, 138, 0.5), rgba(72, 61, 102, 0.8));
    border-radius: 0 0 90px 90px; filter: blur(3px);
  }
  
  .empty-cauldron { text-align: center; padding: 20px; color: var(--color-text-medium); font-style: italic; position: relative; z-index: 1; }
  
  .selected-ingredients {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
    align-items: center; /* Center vertically */
    padding: 15px;
    width: 100%;
    position: relative;
    z-index: 1;
    min-height: 60px; /* Ensure space even with few items */
  }
  .selected-ingredient {
    background-color: var(--color-accent-primary);
    color: var(--color-bg-dark);
    border-radius: var(--border-radius-sm);
    padding: 5px 8px;
    display: flex;
    align-items: center;
    gap: 5px;
    cursor: pointer;
    transition: all var(--transition-speed) ease;
    font-size: 13px;
    font-weight: 500;
  }
  .selected-ingredient:hover { background-color: var(--color-text-light); }
  .selected-ingredient .ingredient-image { width: 20px; height: 20px; margin-bottom: 0; background-color: rgba(0,0,0,0.2); }
  .selected-ingredient .ingredient-name { margin-bottom: 0; font-size: 13px; }
  .remove-icon { width: 14px; height: 14px; font-size: 10px; background-color: rgba(0,0,0,0.3); color: var(--color-bg-dark); margin-left: 3px; }
  .selected-ingredient.placeholder { background: none; border: 1px dashed var(--color-border); width: 80px; height: 30px;} /* Placeholder style */
  
  
  /* Bubbles */
  .bubble {
    position: absolute; background-color: rgba(181, 157, 196, 0.3);
    border-radius: 50%; bottom: 15%; /* Start lower */ opacity: 0;
    animation: bubble-rise 4s ease-in infinite; z-index: 0; /* Behind ingredients */
  }
  .bubble-1 { width: 15px; height: 15px; left: 35%; animation-delay: 0.8s; }
  .bubble-2 { width: 10px; height: 10px; left: 55%; animation-delay: 1.8s; }
  .bubble-3 { width: 18px; height: 18px; left: 65%; animation-delay: 0.2s; }
  @keyframes bubble-rise {
    0% { transform: translateY(0) scale(0.5); opacity: 0; }
    30% { opacity: 0.5; } 80% { opacity: 0.5; }
    100% { transform: translateY(-100px) scale(1.2); opacity: 0; }
  }
  
  .brewing-actions { display: flex; gap: 10px; width: 80%; margin: 15px auto 0 auto; /* Centered actions */ }
  .action-button { flex: 1; padding: 10px 15px; border-radius: var(--border-radius-sm); font-family: var(--font-primary); font-size: 14px; cursor: pointer; transition: all var(--transition-speed) ease; text-align: center; font-weight: 500; }
  .action-button.brew { background-color: var(--color-accent-primary); color: var(--color-bg-dark); border: none; }
  .action-button.brew:hover:not(:disabled) { background-color: var(--color-text-light); transform: translateY(-1px); }
  .action-button.clear { background-color: var(--color-bg-light); color: var(--color-text-medium); border: 1px solid var(--color-border); }
  .action-button.clear:hover:not(:disabled) { background-color: var(--color-border); color: var(--color-text-light); transform: translateY(-1px); }
  .action-button:disabled { opacity: 0.4; cursor: not-allowed; transform: none; box-shadow: none; }
  
  .brewing-result {
    background-color: var(--color-bg-panel);
    border-radius: var(--border-radius-md);
    padding: 15px;
    margin-top: 15px; /* Space above result */
    min-height: 100px; /* Ensure space for messages */
    border: 1px solid var(--color-border);
  }
  .result-card { border-radius: var(--border-radius-sm); padding: 12px; animation: fade-in 0.4s ease-out; }
  .result-card.success { background-color: rgba(126, 186, 118, 0.1); border: 1px solid var(--color-success); }
  .result-card.failure { background-color: rgba(199, 94, 84, 0.1); border: 1px solid var(--color-danger); }
  .result-card h4 { margin: 0 0 8px 0; color: var(--color-text-light); font-size: 16px; }
  .result-card.success h4 { color: var(--color-success); }
  .result-card.failure h4 { color: var(--color-danger); }
  .result-card p { font-family: var(--font-secondary); line-height: 1.4; margin: 0 0 10px 0; color: var(--color-text-medium); font-size: 14px; }
  .result-details { background-color: rgba(0,0,0,0.1); border-radius: var(--border-radius-sm); padding: 8px; }
  .result-potion { font-size: 14px; color: var(--color-accent-primary); margin-bottom: 3px; font-weight: 500; }
  .result-quality { font-size: 13px; color: var(--color-text-medium); }
  
  .recipe-match { background-color: rgba(93, 70, 138, 0.1); border: 1px solid var(--color-border-light); border-radius: var(--border-radius-sm); padding: 12px; animation: fade-in 0.4s ease-out; }
  .recipe-match h4 { margin: 0 0 8px 0; color: var(--color-accent-primary); font-size: 15px; }
  /* .recipe-name is defined below */
  .recipe-description { font-size: 13px; font-family: var(--font-secondary); line-height: 1.4; margin: 8px 0; color: var(--color-text-medium); }
  .recipe-properties { display: flex; flex-wrap: wrap; gap: 4px; margin-bottom: 8px; }
  .property-tag { font-size: 11px; background-color: var(--color-border); color: var(--color-text-medium); padding: 2px 6px; border-radius: 8px; font-family: var(--font-secondary); }
  .recipe-moon-phase { font-size: 13px; color: var(--color-text-dark); }
  .ideal-match { color: var(--color-success); font-style: italic; margin-left: 5px; }
  
  @keyframes fade-in { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
  
  /* Recipes Panel */
  .recipes-panel { /* Styles already defined above */ }
  .recipes-header select { width: 130px; font-size: 13px; padding: 6px 8px; }
  
  .recipe-item { /* Styles already defined above */ }
  .recipe-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
  .recipe-name { font-size: 15px; color: var(--color-text-light); font-family: var(--font-primary); }
  .recipe-difficulty { font-size: 12px; color: var(--color-accent-secondary); font-weight: bold; } /* Use gold for difficulty */
  .recipe-ingredients { font-size: 13px; color: var(--color-text-medium); margin-bottom: 8px; font-family: var(--font-secondary); }
  .recipe-ingredient { color: var(--color-accent-primary); font-weight: 500; }
  .recipe-category-tag { /* Styles already defined above */ }
  .recipe-moon-indicator { position: absolute; bottom: 10px; right: 10px; color: var(--color-accent-primary); font-size: 16px; }
  .recipe-moon-indicator.ideal { color: var(--color-success); } /* Highlight ideal */
  
  /* Responsive */
  /* Keep existing responsive rules, adjust if needed */
  @media (max-width: 1200px) { /* Tablet and smaller */
    .brewing-content { grid-template-columns: 1fr 1fr; grid-template-rows: auto auto; }
    .ingredients-panel { grid-column: 1 / 2; grid-row: 1 / 3; }
    .brewing-workspace { grid-column: 2 / 3; grid-row: 1 / 2; min-height: 350px; }
    .recipes-panel { grid-column: 2 / 3; grid-row: 2 / 3; }
  }
  @media (max-width: 768px) { /* Mobile */
    .brewing-content { grid-template-columns: 1fr; grid-template-rows: auto auto auto; }
    .ingredients-panel, .brewing-workspace, .recipes-panel { grid-column: 1 / 2; }
    .ingredients-panel { grid-row: 1 / 2; height: 300px; }
    .brewing-workspace { grid-row: 2 / 3; min-height: 300px; }
    .recipes-panel { grid-row: 3 / 4; height: 300px; }
    .brewing-header h2 { font-size: 22px; }
    .ingredient-item { flex-direction: row; text-align: left; }
    .ingredient-details { text-align: left;}
    .ingredient-name { font-size: 14px; }
  }