/* frontend/src/components/LunarPhaseIcon.css */
/* Redesigned Lunar Phase Icon with 90s UI Aesthetic */

.lunar-phase-icon {
  display: inline-block;
  position: relative;
  cursor: help; /* Indicate hover information */
  border-radius: 50%; /* Keep the icon circular */
  /* 90s Bevel effect */
  border: 2px solid;
  border-color: var(--color-border-light) var(--color-border-dark) var(--color-border-dark) var(--color-border-light);
  box-shadow: 2px 2px 0px rgba(0, 0, 0, 0.2); /* 90s shadow */
  background-color: var(--color-bg-dark); /* Dark background inside the border */
  transition: transform 0.15s ease;
  image-rendering: pixelated; /* Ensure crisp edges if possible */
}

.lunar-phase-icon:hover {
  transform: scale(1.1); /* Simple scale on hover */
}

.lunar-phase-container {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  overflow: hidden; /* Clip contents to circle */
}

/* Subtle texture/noise for the background */
.lunar-phase-container::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4" viewBox="0 0 4 4"><path fill="%23ffffff" fill-opacity="0.03" d="M1 3h1v1H1V3zm2-2h1v1H3V1z"%3E%3C/path%3E%3C/svg%3E');
    pointer-events: none;
    z-index: 0;
}


/* SVG style refinements */
.lunar-phase-icon svg {
  display: block; /* Prevent extra space below SVG */
  position: relative;
  z-index: 2; /* Above background effects */
  filter: drop-shadow(1px 1px 1px rgba(0, 0, 0, 0.4)); /* Basic shadow */
  overflow: visible; /* Allow stroke to be fully visible */
}

/* Define stroke width using CSS variable passed from component */
.lunar-phase-icon svg circle,
.lunar-phase-icon svg path {
  stroke-width: var(--stroke-width, 1px);
}

/* Dark part of the moon */
.lunar-phase-icon svg .moon-dark {
  fill: var(--color-bg-dark); /* Very dark fill */
  stroke: var(--color-border-dark); /* Dark outline */
}

/* Light part of the moon */
.lunar-phase-icon svg .moon-light {
  fill: var(--color-text-light); /* Parchment color for light */
  stroke: #c1b29f; /* Slightly darker parchment stroke */
}

/* Special styling for Full Moon */
.lunar-phase-icon.fullmoon svg .moon-light {
  fill: #fff; /* Brighter white for full moon */
  stroke: #e4dbee;
  filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.6)); /* Glow */
}

/* Special styling for New Moon */
.lunar-phase-icon.newmoon svg .moon-dark {
  fill: #1c1824; /* Even darker */
  stroke: #2d2038;
}

/* Easter Egg: Pulsing Glow on Full Moon Hover */
.lunar-phase-icon.fullmoon.pulsing-glow svg .moon-light {
    animation: fullMoonPulse 1.5s infinite ease-in-out;
}

@keyframes fullMoonPulse {
    0%, 100% { filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.6)); transform: scale(1); }
    50% { filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.8)); transform: scale(1.03); }
}


/* Tooltip styling */
.lunar-phase-tooltip {
  position: absolute;
  bottom: calc(100% + 8px); /* Position above the icon */
  left: 50%;
  transform: translateX(-50%);
  background-color: var(--color-bg-panel); /* Panel background */
  color: var(--color-text-light);
  padding: 5px 10px;
  border-radius: var(--border-radius-sm);
  font-family: 'Courier New', monospace; /* Use monospace */
  font-size: 12px;
  white-space: nowrap;
  opacity: 0;
  transition: opacity 0.2s ease, transform 0.2s ease;
  pointer-events: none;
  z-index: 10;
  border: 1px solid var(--color-border);
  box-shadow: 2px 2px 0px rgba(0, 0, 0, 0.2); /* 90s shadow */
}

.lunar-phase-tooltip::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: var(--color-bg-panel) transparent transparent transparent; /* Arrow */
}

.lunar-phase-icon:hover .lunar-phase-tooltip {
  opacity: 1;
  transform: translateX(-50%) translateY(-3px); /* Slight upward move */
}

/* Remove redundant glow/stars/shadow overlays if not needed */
/* .lunar-phase-glow, .lunar-phase-stars, .lunar-phase-shadow { display: none; } */
/* These are removed in favor of simpler border/shadow/filter effects */